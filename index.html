<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antentati Full Image Finder</title>
</head>
<body>
    <h1>Antentati Image URL Builder</h1>

    <p>This form will take a page link on the Antenati website and generate the link to the full image file for you. See the help information below for how to get the link to an Antenati page.</p>
    
    <form id="urlForm" onsubmit="generateImageUrl(); return false;">
        <!-- <label for="urlInput">Paste URL here:</label><br> -->
        <input type="text" id="urlInput" placeholder="Enter Antenati page URL here" style="width: 90%; padding: 8px;"><br>
        <small>Example: <a target="_blank" href="https://antenati.cultura.gov.it/ark:/12657/an_ua253675/0nNM9yq">https://antenati.cultura.gov.it/ark:/12657/an_ua253675/0nNM9yq</a></small><br><br>
        <button type="submit">Get full image URL</button>
    </form>
    
    <div id="result" style="margin-top: 20px;">
        <label for="fullImageUrl" style="display: none;">Full image URL:</label>
        <a href="#" id="fullImageUrl" target="_blank"></a>
    </div>

    <div>
      <h2>How to get Antenati page URL</h2>
      <img width="20%" height="auto" src="antenati_copy_link.png"</img>
    </div>
    
    <script>
        function generateImageUrl() {
            // Get the URL from the input field
            const inputUrl = document.getElementById("urlInput").value;
            
            // Extract the last part of the URL after the last "/"
            const urlParts = inputUrl.split('/');
            const imageId = urlParts[urlParts.length - 1];
            
            // Build the full image URL
            const fullImageUrl = "https://iiif-antenati.san.beniculturali.it"
                  + "/iiif/2/"
                  + imageId
                  + "/full/full/0/default.jpg"
                  ;

            // Display the result
            const resultLabel = document.querySelector("#result label");
            const resultLink = document.getElementById("fullImageUrl");
            
            resultLabel.style.display = "inline";  // Show the label
            resultLink.href = fullImageUrl;        // Set the href for the link
            resultLink.textContent = fullImageUrl; // Set the text content of the link
        }
    </script>
</body>
</html>
